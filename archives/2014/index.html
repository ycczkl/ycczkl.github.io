<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014 | Kelun | Blog</title>
  <meta name="author" content="Kelun Zhang">
  
  <meta name="description" content="This is my bolg, welcome">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Kelun | Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Kelun | Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-53633801-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Kelun | Blog</a></h1>
  <h2><a href="/">A code monkey with a simple dream</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/atom.xml">Rss</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">2014</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-12-25T11:09:12.000Z"><a href="/2014/12/25/Learning-lo-dashjs(1)/">Dec 25 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/12/25/Learning-lo-dashjs(1)/">Learning lo-dash.js</a></h1>
  

    </header>
    <div class="entry">
      
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="comment">/**
   * Creates an array with all falsey values of `array` removed. The values
   * `false`, `null`, `0`, `""`, `undefined` and `NaN` are all falsey.
   *
   * @static
   * @memberOf _
   * @category Arrays
   * @param {Array} array The array to compact.
   * @returns {Array} Returns a new filtered array.
   * @example
   *
   * _.compact([0, 1, false, 2, '', 3]);
   * // =&gt; [1, 2, 3]
   */</span>
  <span class="function"><span class="keyword">function</span> <span class="title">compact</span><span class="params">(array)</span> {</span>
    <span class="keyword">var</span> index = -<span class="number">1</span>,
        length = array ? array.length : <span class="number">0</span>,
        result = [];

    <span class="keyword">while</span> (++index &lt; length) {
      <span class="keyword">var</span> value = array[index];
      <span class="keyword">if</span> (value) {
        result.push(value);
      }
    }
    <span class="keyword">return</span> result;
  }
</pre></td></tr></table></figure>  

<ol>
<li>First we need to know if the input is an array. The code below <figure class="highlight length"><figcaption><span>= array ? array.length : 0``` detect if the input is not an array, than the length is set to 0 or undefined.</span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="number">2.</span> <span class="keyword">If</span> the input <span class="keyword">is</span> <span class="keyword">not</span> an <span class="keyword">array</span> <span class="keyword">or</span> <span class="keyword">is</span> an empty <span class="keyword">array</span>, this <span class="keyword">function</span> will <span class="keyword">return</span> an empty <span class="keyword">array</span>.

<span class="number">3.</span> <span class="keyword">If</span> the input <span class="keyword">is</span> an unempty <span class="keyword">array</span>, than iterate the <span class="keyword">array</span> <span class="keyword">and</span> <span class="keyword">use</span> this code
</pre></td></tr></table></figure>if (value){result.push(value);}<code>`` to put all unfalsey value into an empty array.</code>false<code>,</code>null<code>,</code>0<code>,</code>“”<code>,</code>undefined<code>and</code>NaN` are all falsey.</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-12-13T21:35:58.000Z"><a href="/2014/12/14/hello-world/">Dec 14 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/12/14/hello-world/">Hello World</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">trobuleshooting</a> or you can ask me on <a href="https://github.com/tommy351/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2>
<h3 id="Create_a_new_post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$ hexo new <span class="string">"My New Post"</span>
</pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$ hexo server
</pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$ hexo generate
</pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$ hexo deploy
</pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-11-19T02:12:34.000Z"><a href="/2014/11/19/Understanding-Sockets/">Nov 19 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/11/19/Understanding-Sockets/">Understanding Sockets</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Understanding Sockets</p>
<ol>
<li><p>The client server model</p>
<ul>
<li>The steps involved in establishing a socket on the client side are as follows:<ol>
<li>Create a socket with the socket() system call</li>
<li>Connect the socket to the address of the server using the connect() system call</li>
<li>Send and receive data. There are a number of ways to do this, but the simplest is to use the read() and write() system calls.        </li>
</ol>
</li>
<li>The steps involved in establishing a socket on the server side are as follows:<ol>
<li>Create a socket with the socket() system call</li>
<li>Bind the socket to an address using the bind() system call. For a server socket on the Internet, an address consists of a port number on the host machine.</li>
<li>Listen for connections with the listen() system call</li>
<li>Accept a connection with the accept() system call. This call typically blocks until a client connects with the server.</li>
<li>Send and receive data</li>
</ol>
</li>
</ul>
</li>
<li><p>Socket types</p>
<p> When a socket is created, the program as to specify the address domain and the socket type.    </p>
<ul>
<li>Domain:<ol>
<li>unix domain（local file system）</li>
<li>Internet domain(IP + port number)</li>
</ol>
</li>
<li>Socket type:<ol>
<li>Stream sockets(TCP):Stream sockets treat communications as a continuous stream of characters</li>
<li>Datagram sockets(UDP):datagram sockets have to read entire messages at once</li>
</ol>
</li>
</ul>
</li>
<li><p>Best tutorial for sockets</p>
<ul>
<li><a href="http://www.linuxhowtos.org/C_C++/socket.htm" target="_blank" rel="external">http://www.linuxhowtos.org/C_C++/socket.htm</a>        </li>
</ul>
</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-11-12T07:38:50.000Z"><a href="/2014/11/12/What-is-base-64-encoding-used-for/">Nov 12 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/11/12/What-is-base-64-encoding-used-for/">What is base 64 encoding used for?</a></h1>
  

    </header>
    <div class="entry">
      
        <p>When you have some binary data that you want to ship across a network, you generally don’t do it by just streaming the bits and bytes over the wire in a raw format. Why? because some media are made for streaming text. You never know — <strong>some protocols may interpret your binary data as control characters (like a modem), or your binary data could be screwed up because the underlying protocol might think that you’ve entered a special character combination (like how FTP translates line endings)</strong>.</p>
<p>So to get around this, people encode the binary data into characters. Base64 is one of these types of encodings. <strong>Why 64? Because you can generally rely on the same 64 characters being present in many character sets, and you can be reasonably confident that your data’s going to end up on the other side of the wire uncorrupted.</strong></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-10-23T08:15:32.000Z"><a href="/2014/10/23/JavaScript-Style-Guide/">Oct 23 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/10/23/JavaScript-Style-Guide/">JavaScript Style Guide</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="Objects">Objects</h2>
<ul>
<li><p>Use the literal syntax for object creation.</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> item = <span class="keyword">new</span> <span class="built_in">Object</span>();

<span class="comment">// good</span>
<span class="keyword">var</span> item = {};
</pre></td></tr></table></figure>
</li>
<li><p>Don’t use <a href="http://es5.github.io/#x7.6.1" target="_blank" rel="external">reserved words</a> as keys. It won’t work in IE8. <a href="https://github.com/airbnb/javascript/issues/61" target="_blank" rel="external">More info</a></p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> superman = {
  <span class="keyword">default</span>: { clark: <span class="string">'kent'</span> },
  private: <span class="literal">true</span>
};

<span class="comment">// good</span>
<span class="keyword">var</span> superman = {
  defaults: { clark: <span class="string">'kent'</span> },
  hidden: <span class="literal">true</span>
};
</pre></td></tr></table></figure>
</li>
<li><p>Use readable synonyms in place of reserved words.</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> superman = {
  <span class="keyword">class</span>: <span class="string">'alien'</span>
};

<span class="comment">// bad</span>
<span class="keyword">var</span> superman = {
  klass: <span class="string">'alien'</span>
};

<span class="comment">// good</span>
<span class="keyword">var</span> superman = {
  type: <span class="string">'alien'</span>
};
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Arrays">Arrays</h2>
<ul>
<li><p>Use the literal syntax for array creation</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>();

<span class="comment">// good</span>
<span class="keyword">var</span> items = [];
</pre></td></tr></table></figure>
</li>
<li><p>If you don’t know array length use Array#push.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> someStack = [];


<span class="comment">// bad</span>
someStack[someStack.length] = <span class="string">'abracadabra'</span>;

<span class="comment">// good</span>
someStack.push(<span class="string">'abracadabra'</span>);
</pre></td></tr></table></figure>
</li>
<li><p>When you need to copy an array use Array#slice. <a href="http://jsperf.com/converting-arguments-to-an-array/7" target="_blank" rel="external">jsPerf</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> len = items.length,
    itemsCopy = [],
    i;

<span class="comment">// bad</span>
<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) {
  itemsCopy[i] = items[i];
}

<span class="comment">// good</span>
itemsCopy = items.slice();
</pre></td></tr></table></figure>
</li>
<li><p>To convert an array-like object to an array, use Array#slice.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">trigger</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);
  ...
}
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Strings">Strings</h2>
<ul>
<li><p>Use single quotes <code>&#39;&#39;</code> for strings</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> name = <span class="string">"Bob Parr"</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> name = <span class="string">'Bob Parr'</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> fullName = <span class="string">"Bob "</span> + <span class="keyword">this</span>.lastName;

<span class="comment">// good</span>
<span class="keyword">var</span> fullName = <span class="string">'Bob '</span> + <span class="keyword">this</span>.lastName;
</pre></td></tr></table></figure>
</li>
<li><p>Strings longer than 80 characters should be written across multiple lines using string concatenation.</p>
</li>
<li><p>Note: If overused, long strings with concatenation could impact performance. <a href="http://jsperf.com/ya-string-concat" target="_blank" rel="external">jsPerf</a> &amp; <a href="https://github.com/airbnb/javascript/issues/40" target="_blank" rel="external">Discussion</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super long error that was thrown because \
of Batman. When you stop to think about how Batman had anything to do \
with this, you would get nowhere \
fast.'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super long error that was thrown because '</span> +
  <span class="string">'of Batman. When you stop to think about how Batman had anything to do '</span> +
  <span class="string">'with this, you would get nowhere fast.'</span>;
</pre></td></tr></table></figure>
</li>
<li><p>When programmatically building up a string, use Array#join instead of string concatenation. Mostly for IE: <a href="http://jsperf.com/string-vs-array-concat/2" target="_blank" rel="external">jsPerf</a>. Document of join function: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join" target="_blank" rel="external">MDN</a>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre><span class="keyword">var</span> items,
    messages,
    length,
    i;

messages = [{
  state: <span class="string">'success'</span>,
  message: <span class="string">'This one worked.'</span>
}, {
  state: <span class="string">'success'</span>,
  message: <span class="string">'This one worked as well.'</span>
}, {
  state: <span class="string">'error'</span>,
  message: <span class="string">'This one did not work.'</span>
}];

length = messages.length;

<span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">inbox</span><span class="params">(messages)</span> {</span>
  items = <span class="string">'&lt;ul&gt;'</span>;

  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length; i++) {
    items += <span class="string">'&lt;li&gt;'</span> + messages[i].message + <span class="string">'&lt;/li&gt;'</span>;
  }

  <span class="keyword">return</span> items + <span class="string">'&lt;/ul&gt;'</span>;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">inbox</span><span class="params">(messages)</span> {</span>
  items = [];

  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length; i++) {
    items[i] = messages[i].message;
  }

  <span class="keyword">return</span> <span class="string">'&lt;ul&gt;&lt;li&gt;'</span> + items.join(<span class="string">'&lt;/li&gt;&lt;li&gt;'</span>) + <span class="string">'&lt;/li&gt;&lt;/ul&gt;'</span>;
}
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Variables">Variables</h2>
<ul>
<li><p>Use one <code>var</code> declaration for multiple variables and declare each variable on a newline.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> items = getItems();
<span class="keyword">var</span> goSportsTeam = <span class="literal">true</span>;
<span class="keyword">var</span> dragonball = <span class="string">'z'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> items = getItems(),
    goSportsTeam = <span class="literal">true</span>,
    dragonball = <span class="string">'z'</span>;
</pre></td></tr></table></figure>
</li>
<li><p>Declare unassigned variables last. This is helpful when later on you might need to assign a variable depending on one of the previous assigned variables.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> i, len, dragonball,
    items = getItems(),
    goSportsTeam = <span class="literal">true</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> i, items = getItems(),
    dragonball,
    goSportsTeam = <span class="literal">true</span>,
    len;

<span class="comment">// good</span>
<span class="keyword">var</span> items = getItems(),
    goSportsTeam = <span class="literal">true</span>,
    dragonball,
    length,
    i;
</pre></td></tr></table></figure>
</li>
<li><p>Assign variables at the top of their scope. This helps avoid issues with variable declaration and assignment hoisting related issues.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  test();
  console.log(<span class="string">'doing stuff..'</span>);

  <span class="comment">//..other stuff..</span>

  <span class="keyword">var</span> name = getName();

  <span class="keyword">if</span> (name === <span class="string">'test'</span>) {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="keyword">return</span> name;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> name = getName();

  test();
  console.log(<span class="string">'doing stuff..'</span>);

  <span class="comment">//..other stuff..</span>

  <span class="keyword">if</span> (name === <span class="string">'test'</span>) {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="keyword">return</span> name;
}

<span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> name = getName();

  <span class="keyword">if</span> (!<span class="built_in">arguments</span>.length) {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="keyword">return</span> <span class="literal">true</span>;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">if</span> (!<span class="built_in">arguments</span>.length) {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="keyword">var</span> name = getName();

  <span class="keyword">return</span> <span class="literal">true</span>;
}
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Comments">Comments</h2>
<ul>
<li><p>Use <code>/** ... */</code> for multiline comments. Include a description, specify types and values for all parameters and return values.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="comment">// make() returns a new element</span>
<span class="comment">// based on the passed in tag name</span>
<span class="comment">//</span>
<span class="comment">// @param &lt;String&gt; tag</span>
<span class="comment">// @return &lt;Element&gt; element</span>
<span class="function"><span class="keyword">function</span> <span class="title">make</span><span class="params">(tag)</span> {</span>

  <span class="comment">// ...stuff...</span>

  <span class="keyword">return</span> element;
}

<span class="comment">// good</span>
<span class="comment">/**
 * make() returns a new element
 * based on the passed in tag name
 *
 * @param &lt;String&gt; tag
 * @return &lt;Element&gt; element
 */</span>
<span class="function"><span class="keyword">function</span> <span class="title">make</span><span class="params">(tag)</span> {</span>

  <span class="comment">// ...stuff...</span>

  <span class="keyword">return</span> element;
}
</pre></td></tr></table></figure>
</li>
<li><p>Use <code>//</code> for single line comments. Place single line comments on a newline above the subject of the comment. Put an empty line before the comment.</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> active = <span class="literal">true</span>;  <span class="comment">// is current tab</span>

<span class="comment">// good</span>
<span class="comment">// is current tab</span>
<span class="keyword">var</span> active = <span class="literal">true</span>;

<span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">getType</span><span class="params">()</span> {</span>
  console.log(<span class="string">'fetching type...'</span>);
  <span class="comment">// set the default type to 'no type'</span>
  <span class="keyword">var</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;

  <span class="keyword">return</span> type;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">getType</span><span class="params">()</span> {</span>
  console.log(<span class="string">'fetching type...'</span>);

  <span class="comment">// set the default type to 'no type'</span>
  <span class="keyword">var</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;

  <span class="keyword">return</span> type;
}
</pre></td></tr></table></figure></p>
<h2 id="Whitespace">Whitespace</h2>
</li>
<li><p>Use indentation when making long method chains.</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre><span class="comment">// bad</span>
$(<span class="string">'#items'</span>).find(<span class="string">'.selected'</span>).highlight().end().find(<span class="string">'.open'</span>).updateCount();

<span class="comment">// good</span>
$(<span class="string">'#items'</span>)
  .find(<span class="string">'.selected'</span>)
    .highlight()
    .end()
  .find(<span class="string">'.open'</span>)
    .updateCount();

<span class="comment">// bad</span>
<span class="keyword">var</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data).enter().append(<span class="string">'svg:svg'</span>).class(<span class="string">'led'</span>, <span class="literal">true</span>)
    .attr(<span class="string">'width'</span>,  (radius + margin) * <span class="number">2</span>).append(<span class="string">'svg:g'</span>)
    .attr(<span class="string">'transform'</span>, <span class="string">'translate('</span> + (radius + margin) + <span class="string">','</span> + (radius + margin) + <span class="string">')'</span>)
    .call(tron.led);

<span class="comment">// good</span>
<span class="keyword">var</span> leds = stage.selectAll(<span class="string">'.led'</span>)
    .data(data)
  .enter().append(<span class="string">'svg:svg'</span>)
    .class(<span class="string">'led'</span>, <span class="literal">true</span>)
    .attr(<span class="string">'width'</span>,  (radius + margin) * <span class="number">2</span>)
  .append(<span class="string">'svg:g'</span>)
    .attr(<span class="string">'transform'</span>, <span class="string">'translate('</span> + (radius + margin) + <span class="string">','</span> + (radius + margin) + <span class="string">')'</span>)
    .call(tron.led);
</pre></td></tr></table></figure></p>
<h2 id="Type_Casting_&amp;_Coercion">Type Casting &amp; Coercion</h2>
</li>
<li><p>Perform type coercion at the beginning of the statement.</p>
</li>
<li><p>Strings:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="comment">//  =&gt; this.reviewScore = 9;</span>

<span class="comment">// bad</span>
<span class="keyword">var</span> totalScore = <span class="keyword">this</span>.reviewScore + <span class="string">''</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> totalScore = <span class="string">''</span> + <span class="keyword">this</span>.reviewScore;

<span class="comment">// bad</span>
<span class="keyword">var</span> totalScore = <span class="string">''</span> + <span class="keyword">this</span>.reviewScore + <span class="string">' total score'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> totalScore = <span class="keyword">this</span>.reviewScore + <span class="string">' total score'</span>;
</pre></td></tr></table></figure>
</li>
<li><p>Use <code>parseInt</code> for Numbers and always with a radix for type casting.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="keyword">var</span> inputValue = <span class="string">'4'</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> val = <span class="keyword">new</span> <span class="built_in">Number</span>(inputValue);

<span class="comment">// bad</span>
<span class="keyword">var</span> val = +inputValue;

<span class="comment">// bad</span>
<span class="keyword">var</span> val = inputValue &gt;&gt; <span class="number">0</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> val = <span class="built_in">parseInt</span>(inputValue);

<span class="comment">// good</span>
<span class="keyword">var</span> val = <span class="built_in">Number</span>(inputValue);

<span class="comment">// good</span>
<span class="keyword">var</span> val = <span class="built_in">parseInt</span>(inputValue, <span class="number">10</span>);
</pre></td></tr></table></figure>
</li>
<li><p>If for whatever reason you are doing something wild and <code>parseInt</code> is your bottleneck and need to use Bitshift for <a href="http://jsperf.com/coercion-vs-casting/3" target="_blank" rel="external">performance reasons</a>, leave a comment explaining why and what you’re doing.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="comment">// good</span>
<span class="comment">/**
 * parseInt was the reason my code was slow.
 * Bitshifting the String to coerce it to a
 * Number made it a lot faster.
 */</span>
<span class="keyword">var</span> val = inputValue &gt;&gt; <span class="number">0</span>;
</pre></td></tr></table></figure>
</li>
<li><p><strong>Note:</strong> Be careful when using bitshift operations. Numbers are represented as <a href="http://es5.github.io/#x4.3.19" target="_blank" rel="external">64-bit values</a>, but Bitshift operations always return a 32-bit integer (<a href="http://es5.github.io/#x11.7" target="_blank" rel="external">source</a>). Bitshift can lead to unexpected behavior for integer values larger than 32 bits. <a href="https://github.com/airbnb/javascript/issues/109" target="_blank" rel="external">Discussion</a>. Largest signed 32-bit Int is 2,147,483,647:</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="number">2147483647</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; 2147483647</span>
<span class="number">2147483648</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483648</span>
<span class="number">2147483649</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483647</span>
</pre></td></tr></table></figure></p>
<h2 id="Naming_Conventions">Naming Conventions</h2>
</li>
<li><p>Avoid single letter names. Be descriptive with your naming.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">q</span><span class="params">()</span> {</span>
  <span class="comment">// ...stuff...</span>
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">()</span> {</span>
  <span class="comment">// ..stuff..</span>
}
</pre></td></tr></table></figure>
</li>
<li><p>Use camelCase when naming objects, functions, and instances</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> OBJEcttsssss = {};
<span class="keyword">var</span> this_is_my_object = {};
<span class="function"><span class="keyword">function</span> <span class="title">c</span><span class="params">()</span> {</span>}
<span class="keyword">var</span> u = <span class="keyword">new</span> user({
  name: <span class="string">'Bob Parr'</span>
});

<span class="comment">// good</span>
<span class="keyword">var</span> thisIsMyObject = {};
<span class="function"><span class="keyword">function</span> <span class="title">thisIsMyFunction</span><span class="params">()</span> {</span>}
<span class="keyword">var</span> user = <span class="keyword">new</span> User({
  name: <span class="string">'Bob Parr'</span>
});
</pre></td></tr></table></figure>
</li>
<li><p>Use PascalCase when naming constructors or classes</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">user</span><span class="params">(options)</span> {</span>
  <span class="keyword">this</span>.name = options.name;
}

<span class="keyword">var</span> bad = <span class="keyword">new</span> user({
  name: <span class="string">'nope'</span>
});

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">User</span><span class="params">(options)</span> {</span>
  <span class="keyword">this</span>.name = options.name;
}

<span class="keyword">var</span> good = <span class="keyword">new</span> User({
  name: <span class="string">'yup'</span>
});
</pre></td></tr></table></figure>
</li>
<li><p>Use a leading underscore <code>_</code> when naming private properties</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">this</span>.__firstName__ = <span class="string">'Panda'</span>;
<span class="keyword">this</span>.firstName_ = <span class="string">'Panda'</span>;

<span class="comment">// good</span>
<span class="keyword">this</span>._firstName = <span class="string">'Panda'</span>;
</pre></td></tr></table></figure>
</li>
<li><p>When saving a reference to <code>this</code> use <code>_this</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> self = <span class="keyword">this</span>;
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    console.log(self);
  };
}

<span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> that = <span class="keyword">this</span>;
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    console.log(that);
  };
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> _this = <span class="keyword">this</span>;
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    console.log(_this);
  };
}
</pre></td></tr></table></figure>
</li>
<li><p>Name your functions. This is helpful for stack traces.</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span><span class="params">(msg)</span> {</span>
  console.log(msg);
};

<span class="comment">// good</span>
<span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span> <span class="title">log</span><span class="params">(msg)</span> {</span>
  console.log(msg);
};
</pre></td></tr></table></figure></p>
<h2 id="Constructors">Constructors</h2>
</li>
<li><p>Assign methods to the prototype object, instead of overwriting the prototype with a new object. Overwriting the prototype makes inheritance impossible: by resetting the prototype you’ll overwrite the base!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Jedi</span><span class="params">()</span> {</span>
  console.log(<span class="string">'new jedi'</span>);
}

<span class="comment">// bad</span>
Jedi.prototype = {
  fight: <span class="function"><span class="keyword">function</span> <span class="title">fight</span><span class="params">()</span> {</span>
    console.log(<span class="string">'fighting'</span>);
  },

  block: <span class="function"><span class="keyword">function</span> <span class="title">block</span><span class="params">()</span> {</span>
    console.log(<span class="string">'blocking'</span>);
  }
};

<span class="comment">// good</span>
Jedi.prototype.fight = <span class="function"><span class="keyword">function</span> <span class="title">fight</span><span class="params">()</span> {</span>
  console.log(<span class="string">'fighting'</span>);
};

Jedi.prototype.block = <span class="function"><span class="keyword">function</span> <span class="title">block</span><span class="params">()</span> {</span>
  console.log(<span class="string">'blocking'</span>);
};
</pre></td></tr></table></figure>
</li>
<li><p>Methods can return <code>this</code> to help with method chaining.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre><span class="comment">// bad</span>
Jedi.prototype.jump = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">this</span>.jumping = <span class="literal">true</span>;
  <span class="keyword">return</span> <span class="literal">true</span>;
};

Jedi.prototype.setHeight = <span class="function"><span class="keyword">function</span><span class="params">(height)</span> {</span>
  <span class="keyword">this</span>.height = height;
};

<span class="keyword">var</span> luke = <span class="keyword">new</span> Jedi();
luke.jump(); <span class="comment">// =&gt; true</span>
luke.setHeight(<span class="number">20</span>) <span class="comment">// =&gt; undefined</span>

<span class="comment">// good</span>
Jedi.prototype.jump = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">this</span>.jumping = <span class="literal">true</span>;
  <span class="keyword">return</span> <span class="keyword">this</span>;
};

Jedi.prototype.setHeight = <span class="function"><span class="keyword">function</span><span class="params">(height)</span> {</span>
  <span class="keyword">this</span>.height = height;
  <span class="keyword">return</span> <span class="keyword">this</span>;
};

<span class="keyword">var</span> luke = <span class="keyword">new</span> Jedi();

luke.jump()
  .setHeight(<span class="number">20</span>);
</pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p>It’s okay to write a custom toString() method, just make sure it works successfully and causes no side effects.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Jedi</span><span class="params">(options)</span> {</span>
  options || (options = {});
  <span class="keyword">this</span>.name = options.name || <span class="string">'no name'</span>;
}

Jedi.prototype.getName = <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> {</span>
  <span class="keyword">return</span> <span class="keyword">this</span>.name;
};

Jedi.prototype.toString = <span class="function"><span class="keyword">function</span> <span class="title">toString</span><span class="params">()</span> {</span>
  <span class="keyword">return</span> <span class="string">'Jedi - '</span> + <span class="keyword">this</span>.getName();
};
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Events">Events</h2>
<ul>
<li><p>When attaching data payloads to events (whether DOM events or something more proprietary like Backbone events), pass a hash instead of a raw value. This allows a subsequent contributor to add more data to the event payload without finding and updating every handler for the event. For example, instead of:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="comment">// bad</span>
$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, listing.id);

...

$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e, listingId)</span> {</span>
  <span class="comment">// do something with listingId</span>
});
</pre></td></tr></table></figure>

<p>prefer:</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="comment">// good</span>
$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, { listingId : listing.id });

...

$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e, data)</span> {</span>
  <span class="comment">// do something with data.listingId</span>
});
</pre></td></tr></table></figure></p>
<h2 id="jQuery">jQuery</h2>
</li>
<li><p>Prefix jQuery object variables with a <code>$</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="keyword">var</span> sidebar = $(<span class="string">'.sidebar'</span>);

<span class="comment">// good</span>
<span class="keyword">var</span> $sidebar = $(<span class="string">'.sidebar'</span>);
</pre></td></tr></table></figure>
</li>
<li><p>Cache jQuery lookups.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span><span class="params">()</span> {</span>
  $(<span class="string">'.sidebar'</span>).hide();

  <span class="comment">// ...stuff...</span>

  $(<span class="string">'.sidebar'</span>).css({
    <span class="string">'background-color'</span>: <span class="string">'pink'</span>
  });
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> $sidebar = $(<span class="string">'.sidebar'</span>);
  $sidebar.hide();

  <span class="comment">// ...stuff...</span>

  $sidebar.css({
    <span class="string">'background-color'</span>: <span class="string">'pink'</span>
  });
}
</pre></td></tr></table></figure>
</li>
<li><p>For DOM queries use Cascading <code>$(&#39;.sidebar ul&#39;)</code> or parent &gt; child <code>$(&#39;.sidebar &gt; ul&#39;)</code>. <a href="http://jsperf.com/jquery-find-vs-context-sel/16" target="_blank" rel="external">jsPerf</a></p>
</li>
<li><p>Use <code>find</code> with scoped jQuery object queries.</p>
<p>```javascript<br>// bad<br>$(‘ul’, ‘.sidebar’).hide();</p>
<p>// bad<br>$(‘.sidebar’).find(‘ul’).hide();</p>
<p>// good<br>$(‘.sidebar ul’).hide();</p>
<p>// good<br>$(‘.sidebar &gt; ul’).hide();</p>
<p>// good<br>$sidebar.find(‘ul’).hide();</p>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-09-26T15:56:13.000Z"><a href="/2014/09/26/Intro-to-Nodejs/">Sep 26 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/09/26/Intro-to-Nodejs/">Intro to Node.js</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="1-_process">1. process</h2>
<p>The process object is a global object and can be accessed from anywhere.</p>
<ul>
<li><p><strong>process.argv</strong>: An array containing the command line arguments. The first element will be ‘node’, the second element will be the name of the JavaScript file. The next elements will be any additional command line arguments.`</p>
<pre><code>  <span class="comment">// print process.argv</span>
  process.argv.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span><span class="params">(val, index, array)</span> {</span>
    console.log(index + <span class="string">': '</span> + val);
  });
</code></pre><p>This will generate:</p>
<pre><code>  $ node <span class="built_in">process</span>-<span class="number">2.</span>js <span class="constant">one</span> <span class="constant">two</span>=<span class="constant">three</span> <span class="constant">four</span>
  <span class="number">0</span>: node
  <span class="number">1</span>: /Users/mjr/work/node/<span class="built_in">process</span>-<span class="number">2.</span>js
  <span class="number">2</span>: <span class="constant">one</span>
  <span class="number">3</span>: <span class="constant">two</span>=<span class="constant">three</span>
  <span class="number">4</span>: <span class="constant">four</span>
</code></pre></li>
</ul>
<h2 id="2-_I/O">2. I/O</h2>
<ul>
<li><p>Synchronous I/O opertion: To perform a filesystem operation we need to use fs module from the Node core library. To load this kind of module, or any other “global” module, use the following incantation:</p>
<pre><code>  <span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)
</code></pre><p>Now you have the full fs module available in a variable named fs.<br>All synchronous (or blocking) filesystem methods in the fs module end with ‘Sync’. To read a file, you’ll need to use </p>
<pre><code>  fs.readFileSync('/path/<span class="keyword">to</span>/<span class="keyword">file</span>') 
</code></pre><p>This method will return a Buffer object containing the complete contents of the file.<br>Buffer objects are Node’s way of efficiently representing arbitrary arrays of data, whether it be ascii, binary or some other format. Buffer objects can be converted to strings by simply calling the toString() method on them. e.g. </p>
<pre><code><span class="attribute">  var str </span>=<span class="string"> buf.toString().</span>
</code></pre><p>An example of basic sync I\O operation: read a file and count the lines:</p>
<pre><code>  <span class="reserved">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);

  <span class="reserved">var</span> buffer = fs.readFileSync(process.argv[<span class="number">2</span>]);
  <span class="reserved">var</span> str = buffer.toString();
  <span class="reserved">var</span> arr = str.split(<span class="string">'\n'</span>);

  <span class="built_in">console</span>.log(arr.length - <span class="number">1</span>);        
</code></pre></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-09-18T10:52:06.000Z"><a href="/2014/09/18/Javascript-tricks/">Sep 18 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/09/18/Javascript-tricks/">Javascript tricks</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="Some_basic_javascript_tricks">Some basic javascript tricks</h1>
<ol>
<li><p>Based on your brower you can use:          </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>	document.documentElement
</pre></td></tr></table></figure>

<p> or</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>	document.body
</pre></td></tr></table></figure><br> to select the body or html element. You can also write code like this:<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>	<span class="keyword">var</span> root = <span class="regexp">/firefox|tridenti.test(navigator.userAgent) ? document.documentElement : document.body</span>
</pre></td></tr></table></figure>
</li>
<li><p>Gets or sets the number of pixels that the content of an element is scrolled upward.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>	root.scrollTop;
</pre></td></tr></table></figure>
</li>
<li><p>Get text rectangle object    </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>	rectObject = object.getBoundingClientRect();
</pre></td></tr></table></figure>
</li>
<li><p>Get full height of the browser and get the height of the viewpoint.</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>	root.scrollHeight; <span class="comment">//full height of browser</span>
	window.innerHeight; <span class="comment">//The height of the view point</span>
</pre></td></tr></table></figure>    </li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-09-07T13:32:43.000Z"><a href="/2014/09/07/Some-basic-notes-about-php-&-mysql/">Sep 7 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/09/07/Some-basic-notes-about-php-&-mysql/">Some basic notes about php &amp; mysql</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="apache:">apache:</h1>
<pre><code><span class="built_in">sudo</span> apachectl start
<span class="built_in">sudo</span> apachectl stop
<span class="built_in">sudo</span> apachectl restart
</code></pre><h1 id="php:">php:</h1>
<ol>
<li><p>urlencode($varable) vs rawurlencode</p>
<ul>
<li>rawurlencode the path:<ul>
<li>Path is the part before the “?”</li>
<li>Spaces must be encoded as %20        </li>
</ul>
</li>
<li>url encode the query string<ul>
<li>Query string is the part after the “?”        + space are better encoded as “+”</li>
</ul>
</li>
</ul>
</li>
<li><p>htmlspecialchars(), htmlentities()</p>
<ul>
<li>Reserved words in html: “&lt;”, “&gt;”, “&amp;”, “</li>
<li>use htmlspecialchars() to render this reserved words.</li>
<li>render some special characters use htmlentities()</li>
</ul>
</li>
<li><p>include(), require()    [when error, halt the execution]</p>
</li>
<li><p>header($string) 必须写在html之前    </p>
<ul>
<li><p>header(“Location: login.php”); //used as redirect to new page.</p>
<figure class="highlight <?php"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>		header(<span class="string">"Location: basic.html"</span>);
		<span class="keyword">exit</span>; <span class="comment">//Prevent render html files</span>
	    <span class="preprocessor">?&gt;</span>
</pre></td></tr></table></figure>    

</li>
</ul>
</li>
</ol>
<h1 id="Mysql">Mysql</h1>
<ol>
<li><p>basic command:</p>
<ul>
<li><p>login:</p>
<pre><code>  mysql <span class="attribute">-u</span> root <span class="attribute">-p</span>
</code></pre></li>
<li><p>Show database:</p>
<pre><code>  <span class="operator"><span class="keyword">SHOW</span> DATABASES;</span>            
</code></pre></li>
<li><p>Creat database:</p>
<pre><code>  <span class="operator"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> &lt;name&gt;;</span>
</code></pre></li>
<li><p>Use database:</p>
<pre><code>  USE <span class="tag">&lt;<span class="title">name</span>&gt;</span>
</code></pre></li>
<li><p>Drop database:</p>
<pre><code>  <span class="operator"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> &lt;name&gt;    </span>
</code></pre></li>
<li><p>Creat new dabase user </p>
<pre><code>  <span class="operator"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> db_name.*
  <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'localhost'</span>
  IDENTIFIED <span class="keyword">BY</span> <span class="string">'password'</span>;</span>

  <span class="operator"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">'username'</span>@<span class="string">'localhost'</span>;</span>
</code></pre></li>
<li><p>TABLE:</p>
<ul>
<li>subject:<ul>
<li>id</li>
<li>menu_name</li>
<li>position</li>
<li>visible</li>
</ul>
</li>
</ul>
</li>
<li><p>SHOW tables:</p>
<pre><code>  <span class="operator"><span class="keyword">SHOW</span> TABLES;</span>
</code></pre></li>
<li><p>Show database schema:</p>
<pre><code>  <span class="operator"><span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> &lt;<span class="keyword">table</span> name&gt;            </span>
</code></pre></li>
<li><p>Creat tables:</p>
<pre><code>  <span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> subjects (   id <span class="keyword">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,    menu_name <span class="keyword">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   position <span class="keyword">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, visible TINYINT(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(id));</span>
</code></pre></li>
<li><p>Show columns:</p>
<p>  SHOW COLUMNS FROM table_name;</p>
</li>
<li><p>crud</p>
<ul>
<li><p>Creat: SQL INSERT</p>
<pre><code>  <span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> (column1, column2, column3)
  <span class="keyword">VALUES</span> (val1, val2 ,val3);</span>
</code></pre></li>
<li><p>Read:SQL SELECT</p>
<pre><code>  <span class="operator"><span class="keyword">SELECT</span> *
  <span class="keyword">FROM</span> <span class="keyword">table</span>
  <span class="keyword">WHERE</span> column1 = <span class="string">'some text'</span>
  <span class="keyword">ORDER</span> <span class="keyword">BY</span> column1 <span class="keyword">ASC</span>;</span>
</code></pre></li>
<li><p>Update</p>
<pre><code>  <span class="operator"><span class="keyword">UPDATE</span> <span class="keyword">table</span>
  <span class="keyword">SET</span> column1 = <span class="string">'some_text'</span>
  <span class="keyword">WHERE</span> id = <span class="number">1</span>;</span>
</code></pre></li>
<li><p>Delete    </p>
<pre><code>  <span class="operator"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">table</span>
  <span class="keyword">WHERE</span> id = <span class="number">1</span>;</span>      
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="PHP_&amp;_Mysql">PHP &amp; Mysql</h1>
<ol>
<li><p>Creat database connection</p>
<pre><code> <span class="variable">$dbhost</span> = <span class="string">"127.0.0.1"</span>;
 <span class="variable">$dbuser</span> = <span class="string">"widght_cms"</span>;
 <span class="variable">$dbpass</span> = <span class="string">"chuangfu1314"</span>;
 <span class="variable">$dbname</span> = <span class="string">"widget_corp"</span>;
 <span class="variable">$connection</span> = mysqli_connect(<span class="variable">$dbhost</span>, <span class="variable">$dbuser</span>, <span class="variable">$dbpass</span>, <span class="variable">$dbname</span>);    
 <span class="keyword">if</span>(mysqli_connect_errno()) {
 <span class="keyword">die</span>(<span class="string">"Database connection faild: "</span> . 
     mysqli_connect_error() . 
     <span class="string">" ("</span> . mysqli_connect_errno() . <span class="string">")"</span>);
 }
</code></pre></li>
<li><p>database query</p>
<ul>
<li><p>Read data:</p>
<pre><code>  <span class="variable">$query</span> = <span class="string">"SELECT * FROM subjects"</span>;
  <span class="variable">$result</span> = mysqli_query(<span class="variable">$connection</span>, <span class="variable">$query</span>);
  <span class="keyword">if</span>(!<span class="variable">$result</span>) {
      <span class="keyword">die</span>(<span class="string">"database query failed."</span>);
  }
</code></pre></li>
<li><p>Creat data(return true or false):                                </p>
<pre><code>  <span class="variable">$query</span> = <span class="string">"INSERT INTO subjects ( mean_name, position, visible) VALUES ({<span class="variable">$menu_name</span>},{<span class="variable">$position</span>},{<span class="variable">$visible</span>})"</span>
  <span class="variable">$result</span> = mysqli_query(<span class="variable">$connection</span>, <span class="variable">$query</span>);
</code></pre></li>
</ul>
</li>
<li><p>Use returned data</p>
<pre><code> <span class="keyword">while</span>(<span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$result</span>)) {
     var_dump(<span class="variable">$row</span>);
     <span class="built_in">echo</span> <span class="string">"&lt;hr /&gt;"</span>;
 }
</code></pre></li>
<li><p>Release returned data</p>
<pre><code> mysqli_free_result(<span class="variable">$result</span>);
</code></pre></li>
<li><p>close database</p>
<pre><code> mysqli_close(<span class="variable">$connection</span>);        
</code></pre></li>
</ol>
<h1 id="Interview_questions">Interview questions</h1>
<ol>
<li><p>How the result set of Mysql be handled in PHP?</p>
<p> The result set can be handled using mysql_fetch_array, mysql_fetch_assoc, mysql_fetch_object or mysql_fetch_row.</p>
</li>
<li><p>How is it possible to know the number of rows returned in result set?</p>
<p> The function mysql_num_rows() returns the number of rows in a result set.</p>
</li>
<li><p>What is the difference between     mysql_fetch_object() and mysql_fetch_array()?</p>
<p> The mysql_fetch_object() function collects the first single matching record where mysql_fetch_array() collects all matching records from the table in an array.</p>
</li>
<li><p>How a constant is defined in a PHP script?</p>
<p> The define() directive lets us defining a constant as follows:</p>
<pre><code> <span class="class"><span class="keyword">define</span> </span>(“ACONSTANT”, <span class="number">123</span>);    
</code></pre></li>
<li><p>How can you pass a variable by reference?</p>
<p> To be able to pass a variable by reference, we use an ampersand in front of it, as follows $var1 = &amp;$var2    </p>
</li>
<li><p>Will a comparison of an integer 12 and a string “13″ work in PHP?</p>
<p> “13″ and 12 can be compared in PHP since it casts everything to the integer type.    </p>
</li>
<li><p>What does $GLOBALS means?</p>
<p> $GLOBALS is associative array including references to all variables which are currently defined in the global scope of the script.                    </p>
</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-31T09:08:48.000Z"><a href="/2014/08/31/My-nodetes-about-penetration-testing/">Aug 31 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/08/31/My-nodetes-about-penetration-testing/">My notes about penetration testing</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="1-Reconnaissance">1.Reconnaissance</h1>
<ol>
<li><p><strong>Website copier</strong>: HTTrack is a free utility that creates an identical, offline copy of the target website. The copied website will include all the pages, links, pictures, and code from the original website; however, it will reside on your local computer. Utilizing a website-copying tool like HTTrack allows us to explore and thor- oughly mine the website “offline” without having to spend additional time traipsing around on the company’s web server.<br>How to install : <code>apt-get install httrack</code> <code>httrack</code></p>
</li>
<li><p><strong>Google hacking</strong>: </p>
<ul>
<li>Serch in specified website:<code>site:domain term to search</code></li>
<li>Search key words in title: <code>allintitle:</code> <code>intitle:</code></li>
<li>Search for sites that contain specific words in the URL: <code>inurl:</code></li>
<li>Search website in cache:<code>cache:</code></li>
<li>Search for certain filetype like .doc, xlsx, ppt, txt:<code>filetype:pdf</code></li>
<li>Combine multiple directives into the same search:<code>site:dsu.edu filetype:pptx</code></li>
</ul>
</li>
<li><p><strong>The harvester</strong>: This tool allows us to quickly and accurately catalog both e-mail<br>addresses and subdomains that are directly related to our target.<code>theharvester -d &lt;domain&gt; -b google</code></p>
</li>
<li><p><strong>whois</strong>: The Whois service allows us to access specific information about our target including the IP addresses or host names of the company’s Domain Name Systems (DNS) servers and contact information which usually contains an address and a phone number.<code>whois target_domain</code></p>
</li>
<li><p><strong>host</strong>: Oftentimes, our reconnaissance efforts will result in host names rather than IP addresses. When this occurs, we can use the “host” tool to perform a translation for us. <code>host target_hostname</code> <code>host ip_adress</code>   </p>
</li>
<li><p><strong>Extracting information from DNS</strong></p>
<ul>
<li>nslookup: nslookup is a tool that can be used to query DNS servers and potentially obtain records about the various hosts of which it is aware.</li>
<li>dig: </li>
</ul>
</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-30T14:05:00.000Z"><a href="/2014/08/30/Some-notes-about-Kali-linux/">Aug 30 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/08/30/Some-notes-about-Kali-linux/">Some notes about Kali linux</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="1-_Some_basic_linux_commands">1. Some basic linux commands</h1>
<ul>
<li>List all the available interfaces for your machine: <code>ifconfig -a</code></li>
<li>Turn up (on) the desired network interface: <code>ifconfig eth0 up 192.168.1.23</code></li>
<li>Assign an IP address through DHCP:<code>dhclient</code></li>
<li>Reboot the machine using the command line interface: <code>reboot</code></li>
<li>Poweroff the machine using the command line interface: <code>poweroff</code></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
    <a href="/archives/2014/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:kelunblog.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/Angularjs/">Angular.js</a><small>2</small></li>
  
    <li><a href="/categories/Hacking/">Hacking</a><small>2</small></li>
  
    <li><a href="/categories/LAMP/">LAMP</a><small>1</small></li>
  
    <li><a href="/categories/RESTful/">RESTful</a><small>1</small></li>
  
    <li><a href="/categories/basic/">basic</a><small>1</small></li>
  
    <li><a href="/categories/github/">github</a><small>1</small></li>
  
    <li><a href="/categories/javascript/">javascript</a><small>11</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Kali/">Kali</a><small>1</small></li>
  
    <li><a href="/tags/Mysql/">Mysql</a><small>1</small></li>
  
    <li><a href="/tags/PHP/">PHP</a><small>1</small></li>
  
    <li><a href="/tags/angular/">angular</a><small>2</small></li>
  
    <li><a href="/tags/apache/">apache</a><small>1</small></li>
  
    <li><a href="/tags/api/">api</a><small>1</small></li>
  
    <li><a href="/tags/base64/">base64</a><small>1</small></li>
  
    <li><a href="/tags/directive/">directive</a><small>1</small></li>
  
    <li><a href="/tags/file-upload/">file upload</a><small>1</small></li>
  
    <li><a href="/tags/github/">github</a><small>1</small></li>
  
    <li><a href="/tags/global-variable/">global variable</a><small>1</small></li>
  
    <li><a href="/tags/javascript-function/">javascript function</a><small>1</small></li>
  
    <li><a href="/tags/javascript-style/">javascript style</a><small>1</small></li>
  
    <li><a href="/tags/kali/">kali</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>1</small></li>
  
    <li><a href="/tags/node/">node</a><small>1</small></li>
  
    <li><a href="/tags/penetration-testing/">penetration testing</a><small>2</small></li>
  
    <li><a href="/tags/rest/">rest</a><small>1</small></li>
  
    <li><a href="/tags/sockets/">sockets</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Kelun Zhang
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53633801-1', 'auto');
  ga('send', 'pageview');

</script>


<script type="text/javascript">
var disqus_shortname = 'kelunblog';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>